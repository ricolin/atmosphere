# Copyright (c) 2024 VEXXHOST, Inc.
# SPDX-License-Identifier: GPL-3.0-only

- project:
    check:
      jobs:
        - atmosphere-build-apko-image-python-openstackclient
    gate:
      jobs:
        - atmosphere-build-apko-image-python-openstackclient
    promote:
      jobs:
        - atmosphere-promote-apko-image-python-openstackclient

- job:
    name: atmosphere-build-apko-image-python-openstackclient
    parent: atmosphere-build-apko-image
    vars: &container_image_vars
      promote_container_image_job: atmosphere-build-apko-image-python-openstackclient
      container_images:
        - container_filename: python-openstackclient.yaml
          registry: harbor.atmosphere.dev
          repository: harbor.atmosphere.dev/library/python-openstackclient
          tags:
            - "{{ zuul.branch | replace('stable/', '') }}"
    files: &container_image_files
      - images/_base.yaml
      - images/_openstack-service.yaml
      - images/python-openstackclient.yaml

- job:
    name: atmosphere-promote-apko-image-python-openstackclient
    parent: atmosphere-promote-apko-image
    vars: *container_image_vars
    files: *container_image_files
